<!-- Rating Section Template -->
<div class="rating-section">
  <div class="rating-header">
    <h3>ƒê√°nh Gi√° B√†i Vi·∫øt</h3>
    <p>B√†i vi·∫øt n√†y c√≥ h·ªØu √≠ch v·ªõi b·∫°n kh√¥ng?</p>
  </div>

  <div class="rating-stats">
    <div class="average-rating">
      <div class="rating-number">4.6</div>
      <div class="rating-stars-display">
        <i class="bi bi-star-fill"></i>
        <i class="bi bi-star-fill"></i>
        <i class="bi bi-star-fill"></i>
        <i class="bi bi-star-fill"></i>
        <i class="bi bi-star-half"></i>
      </div>
      <div class="rating-count">d·ª±a tr√™n 28 ƒë√°nh gi√°</div>
    </div>

    <div class="rating-bars">
      <div class="rating-bar">
        <span class="star-label">5‚òÖ</span>
        <div class="bar-container">
          <div class="bar-fill" style="width: 68%"></div>
        </div>
        <span class="bar-count">19</span>
      </div>
      <div class="rating-bar">
        <span class="star-label">4‚òÖ</span>
        <div class="bar-container">
          <div class="bar-fill" style="width: 25%"></div>
        </div>
        <span class="bar-count">7</span>
      </div>
      <div class="rating-bar">
        <span class="star-label">3‚òÖ</span>
        <div class="bar-container">
          <div class="bar-fill" style="width: 7%"></div>
        </div>
        <span class="bar-count">2</span>
      </div>
      <div class="rating-bar">
        <span class="star-label">2‚òÖ</span>
        <div class="bar-container">
          <div class="bar-fill" style="width: 0%"></div>
        </div>
        <span class="bar-count">0</span>
      </div>
      <div class="rating-bar">
        <span class="star-label">1‚òÖ</span>
        <div class="bar-container">
          <div class="bar-fill" style="width: 0%"></div>
        </div>
        <span class="bar-count">0</span>
      </div>
    </div>
  </div>

  <div class="rate-article">
    <h4>ƒê√°nh gi√° b√†i vi·∫øt n√†y</h4>
    <div class="star-rating" id="userRating">
      <span class="star" data-rating="1">‚òÖ</span>
      <span class="star" data-rating="2">‚òÖ</span>
      <span class="star" data-rating="3">‚òÖ</span>
      <span class="star" data-rating="4">‚òÖ</span>
      <span class="star" data-rating="5">‚òÖ</span>
    </div>
    <button class="rate-button" id="submitRating" disabled>G·ª≠i ƒê√°nh Gi√°</button>
    <div class="rating-message" id="ratingMessage" style="display: none"></div>
  </div>
</div>

<!-- Comments Section Template -->
<div class="comments-section">
  <div class="comments-header">
    <h3>
      <i class="bi bi-chat-dots"></i>
      B√¨nh Lu·∫≠n
      <span class="comments-count">15</span>
    </h3>
    <p>Chia s·∫ª suy nghƒ© v√† kinh nghi·ªám c·ªßa b·∫°n</p>
  </div>

  <!-- Comment Form -->
  <div class="comment-form">
    <h4>ƒê·ªÉ l·∫°i b√¨nh lu·∫≠n</h4>
    <form id="commentForm">
      <div class="form-row">
        <div class="form-group">
          <label for="commentName">H·ªç T√™n *</label>
          <input type="text" id="commentName" name="name" required />
        </div>
        <div class="form-group">
          <label for="commentEmail">Email *</label>
          <input type="email" id="commentEmail" name="email" required />
        </div>
      </div>
      <div class="form-group">
        <label for="commentContent">B√¨nh Lu·∫≠n *</label>
        <textarea
          id="commentContent"
          name="content"
          placeholder="Chia s·∫ª suy nghƒ© c·ªßa b·∫°n v·ªÅ b√†i vi·∫øt..."
          required
        ></textarea>
      </div>
      <button type="submit" class="submit-comment">G·ª≠i B√¨nh Lu·∫≠n</button>
    </form>
  </div>

  <!-- Comments List -->
  <div class="comments-list">
    <!-- Sample Comment 1 -->
    <div class="comment">
      <div class="comment-header">
        <div class="comment-author">
          <div class="author-avatar">Q</div>
          <div class="author-info">
            <h5>Quang Huy</h5>
            <span class="comment-date">1 ng√†y tr∆∞·ªõc</span>
          </div>
        </div>
      </div>
      <div class="comment-content">
        <p>
          B√†i vi·∫øt r·∫•t chi ti·∫øt v√† d·ªÖ hi·ªÉu! C·∫£m ∆°n b·∫°n ƒë√£ chia s·∫ª kinh nghi·ªám
          th·ª±c t·∫ø. Nh·ªØng tips n√†y r·∫•t h·ªØu √≠ch cho ng∆∞·ªùi m·ªõi nh∆∞ m√¨nh.
        </p>
      </div>
      <div class="comment-actions">
        <button class="comment-action like-btn">
          <i class="bi bi-heart"></i>
          <span class="like-count">6</span>
        </button>
        <button class="comment-action reply-btn">
          <i class="bi bi-reply"></i>
          Tr·∫£ l·ªùi
        </button>
      </div>
    </div>

    <!-- Sample Comment 2 -->
    <div class="comment">
      <div class="comment-header">
        <div class="comment-author">
          <div class="author-avatar">N</div>
          <div class="author-info">
            <h5>Nam V√µ</h5>
            <span class="comment-date">3 ng√†y tr∆∞·ªõc</span>
          </div>
        </div>
      </div>
      <div class="comment-content">
        <p>
          M√¨nh ƒë√£ apply ƒë∆∞·ª£c nhi·ªÅu ƒëi·ªÅu t·ª´ b√†i vi·∫øt n√†y v√†o d·ª± √°n th·ª±c t·∫ø. Keep
          writing more! üëç
        </p>
      </div>
      <div class="comment-actions">
        <button class="comment-action like-btn">
          <i class="bi bi-heart"></i>
          <span class="like-count">4</span>
        </button>
        <button class="comment-action reply-btn">
          <i class="bi bi-reply"></i>
          Tr·∫£ l·ªùi
        </button>
      </div>
    </div>
  </div>

  <!-- Load More Comments -->
  <div class="load-more-comments">
    <button class="load-more-btn">Xem Th√™m B√¨nh Lu·∫≠n</button>
  </div>
</div>

<!-- JavaScript Template -->
<script>
  // Rating System
  const stars = document.querySelectorAll(".star");
  const submitRatingBtn = document.getElementById("submitRating");
  const ratingMessage = document.getElementById("ratingMessage");
  let selectedRating = 0;

  stars.forEach((star) => {
    star.addEventListener("mouseover", () => {
      const rating = parseInt(star.dataset.rating);
      highlightStars(rating);
    });

    star.addEventListener("mouseout", () => {
      highlightStars(selectedRating);
    });

    star.addEventListener("click", () => {
      selectedRating = parseInt(star.dataset.rating);
      highlightStars(selectedRating);
      submitRatingBtn.disabled = false;
    });
  });

  function highlightStars(rating) {
    stars.forEach((star, index) => {
      if (index < rating) {
        star.classList.add("active");
      } else {
        star.classList.remove("active");
      }
    });
  }

  submitRatingBtn.addEventListener("click", () => {
    if (selectedRating > 0) {
      submitRatingBtn.disabled = true;
      submitRatingBtn.textContent = "ƒêang g·ª≠i...";

      setTimeout(() => {
        ratingMessage.style.display = "block";
        ratingMessage.className = "rating-message success";
        ratingMessage.textContent = `C·∫£m ∆°n b·∫°n ƒë√£ ƒë√°nh gi√° ${selectedRating} sao! ƒê√°nh gi√° c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c ghi nh·∫≠n.`;
        submitRatingBtn.textContent = "ƒê√£ g·ª≠i";
      }, 1000);
    }
  });

  // Comments System
  const commentForm = document.getElementById("commentForm");
  const commentsList = document.querySelector(".comments-list");
  const commentsCount = document.querySelector(".comments-count");

  commentForm.addEventListener("submit", (e) => {
    e.preventDefault();

    const name = document.getElementById("commentName").value;
    const email = document.getElementById("commentEmail").value;
    const content = document.getElementById("commentContent").value;

    if (name && email && content) {
      addComment(name, content);
      commentForm.reset();
    }
  });

  function addComment(name, content) {
    const newComment = document.createElement("div");
    newComment.className = "comment";

    const avatar = name.charAt(0).toUpperCase();
    const currentTime = "v·ª´a xong";

    newComment.innerHTML = `
      <div class="comment-header">
        <div class="comment-author">
          <div class="author-avatar">${avatar}</div>
          <div class="author-info">
            <h5>${name}</h5>
            <span class="comment-date">${currentTime}</span>
          </div>
        </div>
      </div>
      <div class="comment-content">
        <p>${content}</p>
      </div>
      <div class="comment-actions">
        <button class="comment-action like-btn">
          <i class="bi bi-heart"></i>
          <span class="like-count">0</span>
        </button>
        <button class="comment-action reply-btn">
          <i class="bi bi-reply"></i>
          Tr·∫£ l·ªùi
        </button>
      </div>
    `;

    commentsList.insertBefore(newComment, commentsList.firstChild);

    const currentCount = parseInt(commentsCount.textContent);
    commentsCount.textContent = currentCount + 1;

    const likeBtn = newComment.querySelector(".like-btn");
    addLikeFunctionality(likeBtn);

    newComment.scrollIntoView({ behavior: "smooth", block: "center" });
  }

  // Like functionality
  function addLikeFunctionality(likeBtn) {
    likeBtn.addEventListener("click", () => {
      const likeCount = likeBtn.querySelector(".like-count");
      const currentLikes = parseInt(likeCount.textContent);
      const heart = likeBtn.querySelector("i");

      if (heart.classList.contains("bi-heart")) {
        heart.classList.remove("bi-heart");
        heart.classList.add("bi-heart-fill");
        likeCount.textContent = currentLikes + 1;
        likeBtn.style.color = "#e74c3c";
      } else {
        heart.classList.remove("bi-heart-fill");
        heart.classList.add("bi-heart");
        likeCount.textContent = currentLikes - 1;
        likeBtn.style.color = "";
      }
    });
  }

  // Add like functionality to existing comments
  document.querySelectorAll(".like-btn").forEach(addLikeFunctionality);

  // Reply functionality
  document.querySelectorAll(".reply-btn").forEach((replyBtn) => {
    replyBtn.addEventListener("click", () => {
      alert("Ch·ª©c nƒÉng tr·∫£ l·ªùi ƒëang ƒë∆∞·ª£c ph√°t tri·ªÉn!");
    });
  });

  // Load more comments
  document.querySelector(".load-more-btn").addEventListener("click", () => {
    alert("ƒê√£ hi·ªÉn th·ªã t·∫•t c·∫£ b√¨nh lu·∫≠n!");
  });
</script>
